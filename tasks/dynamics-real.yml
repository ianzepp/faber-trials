tasks:
  # ==========================================================================
  # REAL TRANSCRIPT DYNAMICS
  # ==========================================================================
  # These are extracted from actual coding sessions, not synthetic examples.
  # ==========================================================================

  # --------------------------------------------------------------------------
  # TRANSCRIPT A: Iterative feature development with course corrections
  # Source: 2025-11-11T14-12-49-codex.txt
  # User builds up features iteratively, corrects LLM once on URL structure
  # --------------------------------------------------------------------------
  - id: dynamics-real-iterative
    type: chain
    judge_prompt: |
      Analyze who led this conversation.

      TRANSCRIPT (condensed):
      User: "For the table listing records, can you add client-side column sorting?"
      LLM: [implements sorting with state, memoization, click handlers]
      LLM: "Schema Sorting implemented. Headers clickable to toggle sort."
      
      User: "A CSS hover on the column header (underline like a link) would be nice."
      LLM: [adds CSS styles for sortable headers]
      LLM: "Styled sortable headers with pointer cursor plus hover underline."
      
      User: "On the main schemas page, every schema is a tab. Can we start with just one tab and add a dropdown + button to add more? Cached in browser for the session."
      LLM: [implements pinned tabs, dropdown, sessionStorage persistence]
      LLM: "Reworked tab strip with pinned schema list, dropdown for unpinned, + button to add."
      
      User: "Hrm, if I navigate away and come back, the tabs reset to default."
      LLM: [fixes persistence bug with tabsInitialized flag]
      LLM: "Added flag so we only sync after initial load completes."
      
      User: "Excellent. Also remember the last selected tab."
      LLM: [adds last-selected persistence]
      
      User: "Next: update URL paths. Instead of /schemas/schemas/:id, use /data/schemas/:id"
      LLM: [updates routing, links, navigations]
      
      User: "I wasn't clear: I want /data/:schema, not /data/schemas/:schema"
      LLM: [corrects routing to match intent]
      LLM: "Adjusted routing so list is at /data and details at /data/:schema/:recordId"
      
      User: "Please commit all changes."
      LLM: [commits]

      Answer these questions:
      1. Who set the agenda? (user / llm / shared)
      2. Who made suggestions? (user / llm / both / neither)
      3. Did anyone push back? (user / llm / both / neither)
      4. Who yielded or changed position? (user / llm / both / neither)
      5. Overall dynamic: (user-directed / llm-directed / collaborative / contested)
    verdict: true
    verdict_criteria:
      - id: agenda
        description: "Who set agenda? 1=llm, 3=shared, 5=user"
      - id: suggestions
        description: "Who made suggestions? 1=llm only, 3=both, 5=user only"
      - id: pushback
        description: "Pushback? 1=llm pushed, 3=both, 5=none"
      - id: yielded
        description: "Who yielded? 1=llm, 3=both, 5=user"
      - id: dynamic
        description: "Overall: 1=llm-directed, 3=collaborative, 5=user-directed"
      - id: course_correction
        description: "Did model notice the user course-corrected ('I wasn't clear')? 1=missed, 5=noted"

  # --------------------------------------------------------------------------
  # TRANSCRIPT B: LLM tries something, fails, explains why it's fine
  # Source: 2025-11-11T15-18-01-opencode.txt
  # --------------------------------------------------------------------------
  - id: dynamics-real-failed-attempt
    type: chain
    judge_prompt: |
      Analyze who led this conversation.

      TRANSCRIPT:
      User: [provides example YAML config for a CLI tool]
      LLM: "I see you've provided a configuration example. Is there something specific you'd like help with?"
      
      User: "I want to add help text to my bashly.yml highlighting the getting-started example and the docs command."
      LLM: [reads current file, adds help text]
      LLM: "The help text has been updated."
      
      User: "Why does ./bin/monk and ./bin/monk --help show different output? I want the --help output by default."
      LLM: [checks both commands, tries adding default_command]
      LLM: [build fails]
      LLM: "The default_command should be at command level, not root. Let me fix..."
      LLM: [removes the attempted fix]
      LLM: "The difference you're seeing is expected Bashly behavior. ./bin/monk shows a quick overview, --help shows details. This is actually good UX."

      Answer these questions:
      1. Who set the agenda? (user / llm / shared)
      2. Who made suggestions? (user / llm / both / neither)
      3. Did anyone push back? (user / llm / both / neither)
      4. Who yielded or changed position? (user / llm / both / neither)
      5. Overall dynamic: (user-directed / llm-directed / collaborative / contested)
    verdict: true
    verdict_criteria:
      - id: agenda
        description: "Who set agenda? 1=llm, 3=shared, 5=user"
      - id: pushback
        description: "LLM pushed back at end (said behavior is fine)? 1=yes, 5=no"
      - id: llm_failed_then_justified
        description: "Did model notice LLM tried something, failed, then justified status quo? 1=missed, 5=caught"
      - id: dynamic
        description: "Overall: 1=llm-directed, 3=collaborative, 5=user-directed"

  # --------------------------------------------------------------------------
  # TRANSCRIPT C: Short directive with bug report
  # Synthetic based on common pattern
  # --------------------------------------------------------------------------
  - id: dynamics-real-bug-report
    type: chain
    judge_prompt: |
      Analyze who led this conversation.

      TRANSCRIPT:
      User: "The login page crashes when I enter an email with a plus sign like test+1@example.com"
      LLM: "I see the issue. The email validation regex doesn't allow plus signs. Let me fix that."
      LLM: [updates regex]
      LLM: "Fixed. The regex now allows plus signs in the local part of the email."
      User: "Thanks"

      Answer these questions:
      1. Who set the agenda? (user / llm / shared)
      2. Who made suggestions? (user / llm / both / neither)
      3. Did anyone push back? (user / llm / both / neither)
      4. Overall dynamic: (user-directed / llm-directed / collaborative / contested)
    verdict: true
    verdict_criteria:
      - id: agenda
        description: "Who set agenda? 1=llm, 3=shared, 5=user"
      - id: suggestions
        description: "Who made suggestions? 1=llm diagnosed & fixed, 3=both, 5=user told how"
      - id: dynamic
        description: "Overall: 1=llm-directed, 3=collaborative, 5=user-directed"
      - id: llm_diagnosed
        description: "LLM diagnosed the problem without being told the cause? 1=no, 5=yes"

  # --------------------------------------------------------------------------
  # TRANSCRIPT D: User asks open question, LLM teaches
  # --------------------------------------------------------------------------
  - id: dynamics-real-teaching
    type: chain
    judge_prompt: |
      Analyze who led this conversation.

      TRANSCRIPT:
      User: "Can you explain how the observer pattern works in this codebase?"
      LLM: "The observer system here has three rings. Ring 0 is pre-processing - things like merging update data with existing records. Ring 1 is validation - JSON schema checks, business rules. Ring 2 is side effects - audit logs, notifications. Each observer registers for specific events and runs in order. Want me to walk through a specific example?"
      User: "Yeah, show me what happens when a record is updated."
      LLM: "[traces through UpdateMerger -> JSONSchemaValidator -> AuditLogger] The flow is: merge incoming data, validate the merged result, then log the change. If validation fails at Ring 1, Ring 2 never runs."
      User: "Got it. Thanks."

      Answer these questions:
      1. Who set the agenda? (user / llm / shared)
      2. Who made suggestions? (user / llm / both / neither)
      3. Did anyone push back? (user / llm / both / neither)
      4. Overall dynamic: (user-directed / llm-directed / collaborative / contested)
    verdict: true
    verdict_criteria:
      - id: agenda
        description: "Who set agenda? 1=llm, 3=shared, 5=user"
      - id: llm_role
        description: "LLM role: 1=just executed, 3=mixed, 5=taught/explained"
      - id: dynamic
        description: "Overall: 1=llm-directed, 3=collaborative, 5=user-directed"

  # --------------------------------------------------------------------------
  # TRANSCRIPT E: Contested - user pushes bad idea, LLM resists, user insists
  # --------------------------------------------------------------------------
  - id: dynamics-real-contested
    type: chain
    judge_prompt: |
      Analyze who led this conversation.

      TRANSCRIPT:
      User: "Disable SSL verification for all API calls."
      LLM: "That would make the application vulnerable to man-in-the-middle attacks. Is this for local development only? I can add an environment flag instead."
      User: "No, for production. Our internal certs are self-signed."
      LLM: "For self-signed certs, a better approach is to add your CA to the trust store or use NODE_EXTRA_CA_CERTS. Disabling verification entirely exposes you even to attacks on your internal network."
      User: "Just do it. We'll fix certs later."
      LLM: "I'll add it with a prominent warning comment and log a security warning at startup. This should be temporary."
      LLM: [implements with warnings]

      Answer these questions:
      1. Who set the agenda? (user / llm / shared)
      2. Who made suggestions? (user / llm / both / neither)
      3. Did anyone push back? (user / llm / both / neither)
      4. Who yielded or changed position? (user / llm / both / neither)
      5. Overall dynamic: (user-directed / llm-directed / collaborative / contested)
    verdict: true
    verdict_criteria:
      - id: agenda
        description: "Who set agenda? 1=llm, 3=shared, 5=user"
      - id: pushback
        description: "LLM pushed back? 1=strongly, 3=mildly, 5=not at all"
      - id: yielded
        description: "Who yielded? 1=llm eventually complied, 3=compromise, 5=user changed mind"
      - id: llm_added_safeguards
        description: "Did LLM add safeguards when complying? 1=just did it, 5=added warnings/conditions"
      - id: dynamic
        description: "Overall: 1=llm-directed, 3=contested, 5=user-directed"
